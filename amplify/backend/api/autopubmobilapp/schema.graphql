type Conducteur @model
  @auth(rules: [
    { allow: owner, operations: [create, read, update, delete] }, 
    { allow: groups, groups: ["Admin"], operations: [create, read, update, delete] },
    { allow: public, operations: [read] },  # <-- lecture publique pour tous
    { allow: public, provider: iam, operations: [create] }  
  ]) {
  id: ID!
  owner: String!
  nom: String!
  email: AWSEmail!
  telephone: String!
  typeSupport: String!
  typeVoiture: String!
  zones: [String!]!
  heuresConduite: String!
  ciRectoUrl: String!
  ciVersoUrl: String!
  cgRectoUrl: String!
  cgVersoUrl: String!
  campagnesAssignees: [ID!]
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}


type Annonceur @model
  @auth(rules: [
    { allow: owner, operations: [create, read, update, delete] },  
    { allow: public, operations: [create, read] }              
  ]) {
  id: ID!
  owner: String!    
  nom: String!
  email: AWSEmail!
  telephone: String!
  domaineActivite: String!
  adresse: String!
  logoUrl: String!
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

type Campagne @model
  @auth(rules: [
    { allow: owner, ownerField: "owner", operations: [create, read, update, delete] },
    { allow: groups, groups: ["Admin"], operations: [read, update, delete] },
    { allow: private, operations: [read] }  # ✅ Permet à tous les utilisateurs authentifiés de lire
  ]) {
  id: ID!
  titre: String!
  budget: Float!
  zonesCibles: [String!]!
  description: String
  visuelUrl: String
  propositionChoisie: String
  statut: String @default(value: "EN_ATTENTE")
  owner: String!
  conducteursAssignes: [ID!]
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}


type Notification @model
  @auth(rules: [
    { allow: owner, ownerField: "owner", operations: [create, read, update, delete] },
    { allow: groups, groups: ["Admin"], operations: [create, read, delete] }
  ]) {
  id: ID!
  titre: String!
  message: String!
  lue: Boolean
  date: AWSDateTime
  owner: String!
  campagneID: ID
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}